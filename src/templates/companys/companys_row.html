<!-- 
    左側列表單項 (Company)
    Layout: 左側統編(小) | 右側名稱(大)
-->
<div class="card border-0 shadow-sm company-sidebar-item cursor-pointer" id="company-{{ company.id }}">
    <div class="card-body p-3">
        <!-- 上方：Flex Row -->
        <div class="d-flex align-items-center">
            <!-- 左欄(小)：統編 Badge -->
            <div class="flex-shrink-0 me-3">
                {% if company.tax_id %}
                    <span class="badge rounded-pill bg-info bg-opacity-10 text-info border border-info px-2">
                        {{ company.tax_id }}
                    </span>
                {% else %}
                    <!-- 無統編時顯示圖示 -->
                    <span class="badge rounded-pill bg-light text-secondary border px-2">
                        <i class="fas fa-building"></i>
                    </span>
                {% endif %}
            </div>

            <!-- 右欄(大)：公司名稱 -->
            <div class="flex-grow-1" style="min-width: 0;">
                <!-- 
                    點擊後載入右側詳情，並更新 URL 參數 ?company_id=...
                -->
                <a href="#" 
                   class="text-decoration-none text-dark fw-bold stretched-link text-truncate d-block"
                   hx-get="/ui/companys/{{ company.id }}"
                   hx-target="#main-workspace"
                   hx-swap="innerHTML"
                   hx-push-url="?company_id={{ company.id }}">
                   {{ company.name }}
                </a>
            </div>
        </div>
        
        <!-- 下方：電話與操作 -->
        <div class="d-flex justify-content-between align-items-end mt-2">
            <small class="text-muted" style="font-size: 0.8rem;">
                <i class="fas fa-phone-alt me-1"></i>{{ company.phone or '無電話' }}
            </small>
            
            <!-- 刪除按鈕 (z-index 提高避免觸發 stretched-link) -->
            <button class="btn btn-sm btn-link text-danger p-0 position-relative z-2"
                    hx-delete="/ui/companys/{{ company.id }}"
                    hx-confirm="確定要刪除此公司資料嗎？相關聯絡人也會被刪除。"
                    hx-target="#company-{{ company.id }}"
                    hx-swap="outerHTML"
                    title="刪除公司">
                <i class="fas fa-trash-alt"></i>
            </button>
        </div>
    </div>
</div>

<style>
    .company-sidebar-item { border-left: 4px solid transparent; transition: all 0.2s; }
    .company-sidebar-item:hover { background-color: #f8f9fa; border-left-color: var(--bs-primary); }
</style>